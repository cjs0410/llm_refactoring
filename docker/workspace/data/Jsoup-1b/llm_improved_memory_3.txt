private void normalise(Element element) {
    List<Node> toMove = new ArrayList<Node>();
    Document.OutputSettings outputSettings = element.ownerDocument().outputSettings();

    for (int i = 0; i < element.childNodeSize(); i++) {
        Node node = element.childNode(i);
        if (node instanceof TextNode) {
            TextNode tn = (TextNode) node;
            if (!tn.isBlank()) {
                toMove.add(tn);
            }
        }
    }

    for (int i = toMove.size() - 1; i >= 0; i--) {
        Node node = toMove.get(i);
        element.removeChild(node);
        Node space = new TextNode(outputSettings.prettyPrint() ? " " : "", "");
        element.prependChild(space);
        element.prependChild(node);
    }
}