public String setValue(String val) {
    String oldVal;
    if (parent != null) {
        int i = parent.indexOfKey(this.key);
        if (i != Attributes.NotFound) {
            oldVal = parent.vals[i];
            parent.vals[i] = Attributes.checkNotNull(val);
        } else {
            oldVal = parent.put(this.key, Attributes.checkNotNull(val));
        }
    } else {
        oldVal = this.val;
        this.val = Attributes.checkNotNull(val);
    }
    return oldVal;
}